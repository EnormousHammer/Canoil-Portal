services:
  # Backend Python Flask Service (Frontend is on Vercel)
  - type: web
    name: canoil-portal-backend
    env: docker
    plan: pro
    dockerfilePath: ./Dockerfile
    dockerContext: .
    envVars:
      # PORT is automatically set by Render - don't override it
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: USE_GOOGLE_DRIVE_API
        value: true
      - key: GOOGLE_DRIVE_SHARED_DRIVE_NAME
        value: IT_Automation
      - key: GOOGLE_DRIVE_BASE_FOLDER_PATH
        value: MiSys/Misys Extracted Data/API Extractions
      - key: GOOGLE_DRIVE_SALES_ORDERS_PATH
        value: Sales_CSR/Customer Orders/Sales Orders
      # Full Company Data (MISys export) - parent folder; latest subfolder by creation time is used
      - key: FULL_COMPANY_DATA_DRIVE_PATH
        value: MiSys/Misys Extracted Data/Full Company Data From Misys
      - key: FLASK_ENV
        value: production
      # IMPORTANT: Add these secrets manually in Render dashboard:
      # - GOOGLE_DRIVE_SA_JSON (your service account JSON)
      # - GOOGLE_DRIVE_TOKEN (OAuth token if using OAuth)
      # - GMAIL_TOKEN (Gmail OAuth token if using Gmail)
